{"ast":null,"code":"var _jsxFileName = \"D:\\\\2077\\\\Waves\\\\client\\\\src\\\\hoc\\\\Auth.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { authUser } from '../actions/user_actions';\nimport CircularProgress from '@material-ui/core/CircularProgress'; //finction returing a function from route auth\n\nexport default function (ComposedClass, reload, adminRoute = null) {\n  class AuthenticationCheck extends Component {\n    constructor(...args) {\n      super(...args);\n      this.state = {\n        loading: true\n      };\n    }\n\n    componentDidMount() {\n      this.props.dispatch(authUser()).then(response => {\n        let user = this.props.user.userData; //console.log(user)\n\n        if (!user.isAuth) {\n          if (reload) {\n            this.props.history.push('/register_login');\n          }\n        } else {\n          if (reload === false) {\n            console.log('err');\n          }\n        }\n\n        this.setState({\n          loading: false\n        });\n      });\n    }\n\n    render() {\n      if (this.state.loading) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"main_loader\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 24\n          }\n        }, /*#__PURE__*/React.createElement(CircularProgress, {\n          style: {\n            color: '#20196f3'\n          },\n          thickness: 7,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 21\n          }\n        }));\n      }\n\n      return /*#__PURE__*/React.createElement(ComposedClass, Object.assign({}, this.props, {\n        user: this.props.user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 17\n        }\n      }));\n    }\n\n  }\n\n  function mapStateToProps(state) {\n    return {\n      user: state.user\n    };\n  }\n\n  return connect(mapStateToProps)(AuthenticationCheck);\n}","map":{"version":3,"sources":["D:/2077/Waves/client/src/hoc/Auth.js"],"names":["React","Component","connect","authUser","CircularProgress","ComposedClass","reload","adminRoute","AuthenticationCheck","state","loading","componentDidMount","props","dispatch","then","response","user","userData","isAuth","history","push","console","log","setState","render","color","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B,C,CAEA;;AAEA,eAAe,UAASC,aAAT,EAAwBC,MAAxB,EAAgCC,UAAU,GAAC,IAA3C,EAAgD;AAC3D,QAAMC,mBAAN,SAAkCP,SAAlC,CAA4C;AAAA;AAAA;AAAA,WAExCQ,KAFwC,GAEhC;AACJC,QAAAA,OAAO,EAAE;AADL,OAFgC;AAAA;;AAMxCC,IAAAA,iBAAiB,GAAE;AACf,WAAKC,KAAL,CAAWC,QAAX,CAAoBV,QAAQ,EAA5B,EAAgCW,IAAhC,CAAsCC,QAAQ,IAAI;AAC9C,YAAIC,IAAI,GAAG,KAAKJ,KAAL,CAAWI,IAAX,CAAgBC,QAA3B,CAD8C,CAE9C;;AACA,YAAG,CAACD,IAAI,CAACE,MAAT,EAAgB;AACZ,cAAGZ,MAAH,EAAU;AACN,iBAAKM,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,CAAwB,iBAAxB;AACH;AACJ,SAJD,MAIK;AACD,cAAGd,MAAM,KAAK,KAAd,EAAoB;AAChBe,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACH;AACJ;;AACD,aAAKC,QAAL,CAAc;AACVb,UAAAA,OAAO,EAAE;AADC,SAAd;AAGH,OAfD;AAgBH;;AAEDc,IAAAA,MAAM,GAAG;AACL,UAAG,KAAKf,KAAL,CAAWC,OAAd,EAAsB;AAClB,4BAAO;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACH,oBAAC,gBAAD;AAAkB,UAAA,KAAK,EAAE;AAACe,YAAAA,KAAK,EAAE;AAAR,WAAzB;AAA8C,UAAA,SAAS,EAAE,CAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADG,CAAP;AAGH;;AACD,0BACI,oBAAC,aAAD,oBAAmB,KAAKb,KAAxB;AAA+B,QAAA,IAAI,EAAE,KAAKA,KAAL,CAAWI,IAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ;AAGH;;AAlCuC;;AAqC5C,WAASU,eAAT,CAAyBjB,KAAzB,EAA+B;AAC3B,WAAO;AACHO,MAAAA,IAAI,EAAEP,KAAK,CAACO;AADT,KAAP;AAGH;;AAED,SAAOd,OAAO,CAACwB,eAAD,CAAP,CAAyBlB,mBAAzB,CAAP;AACH","sourcesContent":["import React, { Component } from 'react';\r\nimport {connect} from 'react-redux'\r\nimport { authUser } from '../actions/user_actions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n//finction returing a function from route auth\r\n\r\nexport default function(ComposedClass, reload, adminRoute=null){\r\n    class AuthenticationCheck extends Component {\r\n\r\n        state = {\r\n            loading: true\r\n        }\r\n\r\n        componentDidMount(){\r\n            this.props.dispatch(authUser()).then( response => {\r\n                let user = this.props.user.userData\r\n                //console.log(user)\r\n                if(!user.isAuth){\r\n                    if(reload){\r\n                        this.props.history.push('/register_login')\r\n                    }\r\n                }else{\r\n                    if(reload === false){\r\n                        console.log('err')\r\n                    }\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                })\r\n            })\r\n        }\r\n\r\n        render() {\r\n            if(this.state.loading){\r\n                return <div className=\"main_loader\">\r\n                    <CircularProgress style={{color: '#20196f3'}} thickness={7}/>\r\n                </div>\r\n            }\r\n            return (\r\n                <ComposedClass {...this.props} user={this.props.user}/>\r\n            );\r\n        }\r\n    }\r\n\r\n    function mapStateToProps(state){\r\n        return {\r\n            user: state.user\r\n        }\r\n    }\r\n\r\n    return connect(mapStateToProps)(AuthenticationCheck);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}