{"ast":null,"code":"var _jsxFileName = \"D:\\\\2077\\\\Waves\\\\client\\\\src\\\\components\\\\utils\\\\Form\\\\file_upload.js\";\nimport React, { Component } from 'react';\nimport Dropzone from 'react-dropzone';\nimport axios from 'axios';\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\nimport faPlusCircle from '@fortawesome/fontawesome-free-solid/faPlusCircle';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nclass Fileupload extends Component {\n  constructor() {\n    super();\n\n    this.onDrop = files => {\n      //console.log(files);\n      this.setState({\n        uploading: true\n      });\n      let formData = new FormData();\n      const config = {\n        header: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      formData.append(\"file\", files[0]);\n      axios.post('/api/users/uploadimage', formData, config).then(response => {\n        console.log(response.data);\n        this.setState({\n          uploading: false,\n          uploadedFiles: [...this.state.uploadedFiles, response.data]\n        }, () => {\n          this.props.imagesHandler(this.state.uploadedFiles);\n        });\n      });\n    };\n\n    this.onRemove = id => {\n      axios.get(`/api/users/removeimage?public_id=${id}`).then(response => {\n        let images = this.state.uploadedFiles.filter(item => {\n          return item.public_id !== id;\n        });\n        this.setState({\n          uploadedFiles: images\n        }, () => {\n          this.props.imagesHandler(images);\n        });\n      });\n    };\n\n    this.showUploadedImages = () => this.state.uploadedFiles.map(item => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropzone_box\",\n      key: item.public_id,\n      onClick: () => this.onRemove(item.public_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrap\",\n      style: {\n        background: `url(${item.url}) no-repeat`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    })));\n\n    this.state = {\n      uploadedFiles: [],\n      uploading: false\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.reset) {\n      return state = {\n        uploadedFiles: []\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropzone clear\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Dropzone, {\n      onDrop: e => this.onDrop(e),\n      multiple: false,\n      className: \"dropzone_box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPlusCircle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 33\n      }\n    }))), this.showUploadedImages(), this.state.uploading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropzone_box\",\n      style: {\n        textAlign: 'center',\n        paddingTop: '60px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        color: '#00bcd4'\n      },\n      thickness: 7,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 33\n      }\n    })) : null)));\n  }\n\n}\n\nexport default Fileupload;","map":{"version":3,"sources":["D:/2077/Waves/client/src/components/utils/Form/file_upload.js"],"names":["React","Component","Dropzone","axios","FontAwesomeIcon","faPlusCircle","CircularProgress","Fileupload","constructor","onDrop","files","setState","uploading","formData","FormData","config","header","append","post","then","response","console","log","data","uploadedFiles","state","props","imagesHandler","onRemove","id","get","images","filter","item","public_id","showUploadedImages","map","background","url","getDerivedStateFromProps","reset","render","e","textAlign","paddingTop","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Dropzone from 'react-dropzone';\r\nimport axios from 'axios';\r\n\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport faPlusCircle from '@fortawesome/fontawesome-free-solid/faPlusCircle';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nclass Fileupload extends Component {\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            uploadedFiles:[],\r\n            uploading:false\r\n        }\r\n    }\r\n\r\n    onDrop = (files) => {\r\n        //console.log(files);\r\n        this.setState({uploading:true});\r\n        let formData = new FormData();\r\n        const config = {\r\n            header: {'content-type':'multipart/form-data'}\r\n        }\r\n        formData.append(\"file\",files[0]);\r\n\r\n        axios.post('/api/users/uploadimage',formData,config)\r\n        .then(response => {\r\n\r\n            console.log(response.data)\r\n\r\n            this.setState({\r\n                uploading:false,\r\n                uploadedFiles:[\r\n                    ...this.state.uploadedFiles,\r\n                    response.data\r\n                ]\r\n            },()=>{\r\n                this.props.imagesHandler(this.state.uploadedFiles)\r\n            })\r\n        });\r\n    }\r\n\r\n    onRemove = (id) => {\r\n        axios.get(`/api/users/removeimage?public_id=${id}`).then(response=>{\r\n            let images = this.state.uploadedFiles.filter(item=>{\r\n                return item.public_id !== id;\r\n            });\r\n\r\n            this.setState({\r\n                uploadedFiles: images\r\n            },()=>{\r\n                this.props.imagesHandler(images)\r\n            })\r\n        })\r\n    }\r\n\r\n    showUploadedImages = () => (\r\n        this.state.uploadedFiles.map(item=>(\r\n            <div className=\"dropzone_box\"\r\n                key={item.public_id}\r\n                onClick={()=> this.onRemove(item.public_id)}\r\n            >\r\n                <div \r\n                    className=\"wrap\"\r\n                    style={{background:`url(${item.url}) no-repeat`}}\r\n                >\r\n                </div>\r\n            </div>\r\n        ))\r\n    )\r\n\r\n    static getDerivedStateFromProps(props,state){\r\n        if(props.reset){\r\n            return state = {\r\n                uploadedFiles:[]\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <section>\r\n                    <div className=\"dropzone clear\">\r\n                        <Dropzone\r\n                            onDrop={(e)=>this.onDrop(e)}\r\n                            multiple={false}\r\n                            className=\"dropzone_box\"\r\n                        >   \r\n                            <div className=\"wrap\">\r\n                                <FontAwesomeIcon\r\n                                    icon={faPlusCircle}\r\n                                />\r\n                            </div>\r\n                        </Dropzone>\r\n                        { this.showUploadedImages()}\r\n                        {\r\n                            this.state.uploading ?\r\n                            <div className=\"dropzone_box\" style={{\r\n                                textAlign: 'center',\r\n                                paddingTop: '60px'\r\n                            }}>\r\n                                <CircularProgress\r\n                                    style={{color:'#00bcd4'}}\r\n                                    thickness={7}\r\n                                />\r\n                            </div>\r\n                            :null\r\n                        }\r\n\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Fileupload;"]},"metadata":{},"sourceType":"module"}